<metal:main use-macro="load: layout.pt">
<div metal:fill-slot="content">
    <div class="col-md-2">
        <img tal:condition="book.cover_path" src="${request.static_path('campustextbook:uploads/' + book.image_path)}" style="max-width:150px;max-height:175px" class="img-thumbnail" />
        <img tal:condition="not:book.cover_path" src="holder.js/150x175" class="img-thumbnail" />
    </div>
    <div class="col-md-9">
        <h3>${book.title}</h3>
        ${book.author}
        <a href="${request.route_path('sell', book_id=book.id)}">Sell yours here</a>
    </div>
    <div class="pull-right">
        <a class="btn btn-default" href="${request.route_path('remove_book', book_id=book.id)}"><i class="glyphicon glyphicon-remove"></i></a>
    </div>
    <!-- Book info:
         Picture of book on left.
         On right, title of book,
         associated courses, and
         lowest listed price, along
         with price at Carleton
         Bookstore.
     -->
    <!-- "List yours here" button -->
    <table id="listings_table" class="display">
        <thead>
            <tr>
                <td>Price</td>
                <td>Seller</td>
                <td>Condition note</td>
            </tr>
        </thead>
        <tbody>
            <tr tal:repeat="listing listings">
                <td>$${listing.price}</td>
                <td>${listing.selling_user.full_name}</td>
                <td>${listing.condition}</td>
            </tr>
        </tbody>
    </table>
    <script type="text/javascript">
        $(document).ready( function() {
            $('#listings_table').DataTable( {
                "bFilter": false,
                "bInfo": false,
                "bPaginate": false
            } );
        } );
    </script>
</div>
</metal:main>
