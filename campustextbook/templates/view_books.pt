<metal:main use-macro="load: layout.pt">
<div metal:fill-slot="content">
    <div class="row">
        <div class="col-md-2 col-md-offset-10">
            <a class="btn btn-primary" href="${request.route_path('add_book')}"><i class="glyphicon glyphicon-plus"></i> Book</a>
        </div>
    </div>
    <div tal:repeat="book books" class="panel panel-default">
        <div class="panel-body">
            <div class="col-md-2 text-center">
                <img tal:condition="book.cover_path" src="${request.static_path('campustextbook:uploads/' + book.image_path)}" style="max-width:150;max-height:175px" class="img-thumbnail" />
                <img tal:condition="not:book.cover_path" src="holder.js/150x175/text:${book.title}" class="img-thumbnail" />
            </div>
            <div class="col-md-9">
                <h4><a href="${request.route_path('view_book', book_id=book.id)}">${book.title}</a></h4>
                ${book.author}
                <div tal:condition="book.low_price">
                    <a href="${request.route_path('view_book', book_id=book.id)}">
                        <span class="text-danger"><strong>$${book.low_price}</strong></span>
                        <span class="text-muted">(${len(book.listings)} offers)</span>
                    </a>
                </div>
            </div>
            <div class="pull-right">
                <a class="btn btn-default" href="${request.route_path('remove_book', book_id=book.id)}"><i class="glyphicon glyphicon-remove"></i></a>
            </div>
        </div>
    </div>
</div>
</metal:main>
