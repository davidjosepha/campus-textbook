<metal:main use-macro="load: layout.pt">
<div metal:fill-slot="content">
    <form method="POST" action="">
        <div>User:
            <select name="selling_user_id">
                <tal:block repeat="user users">
                <option value="${user.id}">${user.first_name} ${user.last_name}</option>
                </tal:block>
            </select>
        </div>
        <div>Book:
            <select name="book_id">
                <tal:block repeat="book books">
                <option value="${book.id}">${book.title}</option>
                </tal:block>
            </select>
        </div>
        <div>Description: <input type="text" name="description" /></div>
        <div>Price: <input type="text" name="price" /></div>
        <input type="submit" value="Submit" />
        ${message}
    </form>
    <table id="listings_table" class="display">
        <thead>
            <tr>
                <td>Book</td>
                <td>Selling User</td>
                <td>Description</td>
                <td>Price</td>
            </tr>
        </thead>
        <tbody>
            <tr tal:repeat="listing listings">
                <td>${listing.book.title}</td>
                <td>${listing.selling_user.full_name}</td>
                <td>${listing.description}</td>
                <td>$${listing.price}</td>
            </tr>
        </tbody>
    </table>
    <script type="text/javascript">
        $(document).ready( function() {
            $('#listings_table').DataTable();
        } );
    </script>
</div>
</metal:main>
